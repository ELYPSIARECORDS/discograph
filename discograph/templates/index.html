<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/discograph.css"/>
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
</head>
<body>

    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" 
                    data-toggle="collapse" 
                    data-target="#bs-example-navbar-collapse-1" 
                    aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Proginoskes</a>
            </div>
            <form class="navbar-form navbar-right" role="search">
                <div class="form-group">
                    <input id="typeahead" type="text" class="form-control" 
                        placeholder="Search">
                </div>
            </form>
        </div>
    </nav>

<script src="/static/discograph.js"></script>
<script src="/static/typeahead.bundle.js"></script>

<script>
var artistSearch = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
    queryTokenizer: Bloodhound.tokenizers.whitespace, 
    identify: function(datum) { return datum.discogs_id; },
    remote: { 
        url: '/api/search/%QUERY',
        filter: function(response) {
            console.log(response);
            return response.items;
        },
        wildcard: '%QUERY' 
    }
});
$('#typeahead').typeahead(null, {
    name: 'results',
    display: 'name',
    source: artistSearch
});
</script>

</body>
</html>